import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";var _jsxFileName="/Users/trensik/dev/react-native-paper/src/components/Portal/PortalHost.tsx";import*as React from'react';import{View,StyleSheet}from'react-native';import PortalManager from'./PortalManager';export var PortalContext=React.createContext(null);var PortalHost=function(_React$Component){_inherits(PortalHost,_React$Component);function PortalHost(){var _getPrototypeOf2;var _this;_classCallCheck(this,PortalHost);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PortalHost)).call.apply(_getPrototypeOf2,[this].concat(args)));_this._setManager=function(manager){_this._manager=manager;};_this._mount=function(children){var key=_this._nextKey++;if(_this._manager){_this._manager.mount(key,children);}else{_this._queue.push({type:'mount',key:key,children:children});}return key;};_this._update=function(key,children){if(_this._manager){_this._manager.update(key,children);}else{var op={type:'mount',key:key,children:children};var index=_this._queue.findIndex(function(o){return o.type==='mount'||o.type==='update'&&o.key===key;});if(index>-1){_this._queue[index]=op;}else{_this._queue.push(op);}}};_this._unmount=function(key){if(_this._manager){_this._manager.unmount(key);}else{_this._queue.push({type:'unmount',key:key});}};_this._nextKey=0;_this._queue=[];return _this;}_createClass(PortalHost,[{key:"componentDidMount",value:function componentDidMount(){var manager=this._manager;var queue=this._queue;while(queue.length&&manager){var action=queue.pop();if(action){switch(action.type){case'mount':manager.mount(action.key,action.children);break;case'update':manager.update(action.key,action.children);break;case'unmount':manager.unmount(action.key);break;}}}}},{key:"render",value:function render(){return React.createElement(PortalContext.Provider,{value:{mount:this._mount,update:this._update,unmount:this._unmount},__source:{fileName:_jsxFileName,lineNumber:120}},React.createElement(View,{style:styles.container,collapsable:false,__source:{fileName:_jsxFileName,lineNumber:128}},this.props.children),React.createElement(PortalManager,{ref:this._setManager,__source:{fileName:_jsxFileName,lineNumber:131}}));}}]);return PortalHost;}(React.Component);PortalHost.displayName='Portal.Host';export{PortalHost as default};var styles=StyleSheet.create({container:{flex:1}});
//# sourceMappingURL=PortalHost.js.map